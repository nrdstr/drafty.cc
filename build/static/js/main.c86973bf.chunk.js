(window.webpackJsonpfit=window.webpackJsonpfit||[]).push([[0],{16:function(e,t,a){e.exports=a(36)},21:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(13),c=a.n(o),l=(a(21),Object(r.createContext)()),s=function(){return Object(r.useContext)(l)},i=a(4);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m=a(3),p=function(){var e=s(),t=Object(m.a)(e,1)[0],a=t.isLoading,o=t.animations,c=Object(r.useRef)(null),l=o.loader_out;return Object(r.useEffect)((function(){o.loader_out}),[o.loader_out]),a?n.a.createElement("div",{ref:c,className:"loader__container"},n.a.createElement("div",{className:"loader__body ".concat(l?"animate--fade-out":"")},n.a.createElement("span",null,n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null)),n.a.createElement("div",{className:"loader__logo ".concat(l?"animate--fade-out":"")})),n.a.createElement("div",{className:"longfazers ".concat(l?"animate--fade-out":"")},n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null))):null},f=a(6),y=a.n(f),g=a(8);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _=function(){var e=s(),t=Object(m.a)(e,2),a=t[0],r=a.user,o=a.drafts,c=a.animations,l=a.settings,i=a.popover,u=t[1],d=function(e,t){return u({type:"popover",payload:v({},i,{toggle:!0,type:e,button_text:t})})};return l.toggle?n.a.createElement("div",{className:"settings ".concat(c.overlay," ").concat(i.toggle?"blur":"")},n.a.createElement("div",{className:"header--overlay"},n.a.createElement("div",{className:"header__avatar"},n.a.createElement("img",{alt:"Avatar",src:r.avatar})),n.a.createElement("button",{className:"overlay__cancel",onClick:function(){u({type:"animations",payload:v({},c,{overlay:"animate--fade-out"})}),setTimeout((function(){u({type:"settings",payload:v({},l,{toggle:!1})})}),200)}},n.a.createElement("img",{src:"/close.svg",alt:"Close Settings"}))),n.a.createElement("h2",{className:"text text--large text--slim"},"Settings"),n.a.createElement("p",{style:{margin:0},className:"text text--medium text--slim text--light"},r.username),n.a.createElement("ul",{className:"settings__list"},n.a.createElement("li",null,n.a.createElement("p",{className:"text text--medium text--slim"},"Drafts"),n.a.createElement("p",{className:"settings__drafts text text--medium text--slim text--bold"},o.length)),n.a.createElement("li",null,n.a.createElement("p",{className:"text text--medium text--slim"},"Log out"),n.a.createElement("button",{onClick:function(){return d("log_out","Logout")},className:"popover__btn popover__btn--confirm"},"Logout")),n.a.createElement("li",null,n.a.createElement("p",{className:"text text--medium text--slim"},"Delete all drafts"),n.a.createElement("button",{onClick:function(){return d("draft_delete_all","Delete")},className:"popover__btn"},"Delete")),n.a.createElement("li",null,n.a.createElement("p",{className:"text text--medium text--slim"},"Delete my account"),n.a.createElement("button",{onClick:function(){return d("account_delete","Delete")},className:"popover__btn"},"Delete")))):null};function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h=function(){var e=s(),t=Object(m.a)(e,2),a=t[0],r=a.modify,o=a.animations,c=t[1];return n.a.createElement("div",{className:"controls"},n.a.createElement("button",{className:"controls__button controls__button--add",onClick:function(){return e="new_draft",c({type:"animations",payload:O({},o,{overlay:"animate--fade-in"})}),void c({type:"modify",payload:O({},r,Object(i.a)({},e,!0))});var e}},n.a.createElement("img",{src:"/icons/close.svg",alt:"Create new draft"})),n.a.createElement("button",{className:"controls__button controls__button--settings",onClick:function(){return c({type:"animations",payload:O({},o,{overlay:"animate--fade-in"})}),void c({type:"settings",payload:O({},_,{toggle:!0})})}},n.a.createElement("img",{src:"/icons/settings.svg",alt:"Settings"})))},j=function(){var e=s(),t=Object(m.a)(e,1)[0],a=t.user,r=t.popover;return a.isAuthenticated?n.a.createElement("header",{className:"header ".concat(r.toggle?"blur":"")},n.a.createElement("div",{className:"header__user"},n.a.createElement("div",{className:"header__avatar"},n.a.createElement("img",{alt:"Avatar",src:a.avatar}))),n.a.createElement("div",{className:"header__logo"}),n.a.createElement(h,null)):n.a.createElement("header",{className:"header header--login"},n.a.createElement("div",{className:"header__logo header__logo--login"}),n.a.createElement("h1",{className:"text text--large text--bold text--narrow",style:{margin:"0 0 3px 0"}},"drafty"))},w=function(){return n.a.createElement("div",{className:"text footer__container"},n.a.createElement("p",null,"\xa9 Drafty 2020"))},N=a(7),x=a.n(N);x.a.initializeApp({apiKey:"AIzaSyDogAtK4hVuw-_uiI4D5K0NWZc9j8gZUzU",authDomain:"speek2-5f7d5.firebaseapp.com",databaseURL:"https://speek2-5f7d5.firebaseio.com",projectId:"speek2-5f7d5",storageBucket:"speek2-5f7d5.appspot.com",messagingSenderId:"797679846776",appId:"1:797679846776:web:c92fd8300ccfa63746b48d"});new x.a.auth.GoogleAuthProvider;var P=new x.a.auth.TwitterAuthProvider,k=(new x.a.auth.FacebookAuthProvider,x.a.auth()),D=x.a;function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=function(){var e=s(),t=Object(m.a)(e,2),a=t[0],o=a.user,c=a.animations,l=t[1],i=function(){var e=Object(g.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.signInWithRedirect(P).then(function(){var e=Object(g.a)(y.a.mark((function e(t){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.additionalUserInfo.profile,r=(r=a.profile_image_url).replace("_normal",""),l({type:"user",payload:S({},o,{isAuthenticated:!0,uid:k.currentUser.uid,twitterID:a.id,username:a.name,avatar:r})}),setTimeout((function(){l({type:"animations",payload:S({},c,{loader_out:!0})}),setTimeout((function(){l({type:"toggleLoader",payload:!1})}),200)}),1e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){l({type:"toggleLoader",payload:!0}),k.onAuthStateChanged(function(){var e=Object(g.a)(y.a.mark((function e(t){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=8;break}return e.next=4,t;case 4:a=e.sent,r=(r=a.photoURL).replace("_normal",""),l({type:"user",payload:S({},o,{isAuthenticated:!0,uid:k.currentUser.uid,twitterID:a.providerData[0].uid,username:a.displayName,avatar:r})});case 8:setTimeout((function(){l({type:"animations",payload:S({},c,{loader_out:!0})}),setTimeout((function(){l({type:"toggleLoader",payload:!1})}),200)}),1e3),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching previous auth: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[]),o.isAuthenticated?null:n.a.createElement("div",{className:"login__container"},n.a.createElement(j,null),n.a.createElement("div",{className:"login__links"},n.a.createElement("img",{alt:"Home page art",src:"/writer-beard.svg"}),n.a.createElement("div",{style:{marginTop:30},className:"placeholder"},n.a.createElement("button",{onClick:i,className:"placeholder__button placeholder__button--landing"},n.a.createElement("span",{className:"btn__inner"},n.a.createElement("span",{className:"icon fas btn-text-one text text--small text--slim"},"Login with Twitter"),n.a.createElement("span",{className:"btn-text--twitter"}))))),n.a.createElement(w,null))};function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I=function(e){var t=s(),a=Object(m.a)(t,2),o=a[0],c=o.popover,l=o.drafts,i=o.user,u=(o.animations,a[1]),d=Object(r.useState)("animate--fade-in"),p=Object(m.a)(d,2),f=p[0],b=p[1],v=Object(r.useState)(""),_=Object(m.a)(v,2),E=_[0],O=_[1],h=function(){k.signOut().then((function(){u({type:"user",payload:T({},{},{isAuthenticated:!1})}),u({type:"drafts",payload:[]}),w()}))},j=function(){var e=Object(g.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=D.auth().currentUser,console.log("deleting ".concat(t.uid)),e.prev=2,D.database().ref("/users").child(t.uid).remove(),e.next=6,t.delete();case 6:h(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),w=function(){b("animate--fade-out"),u({type:"popover",payload:{toggle:!1,index:null}}),setTimeout((function(){b("animate--fade-in")}),200)};return Object(r.useEffect)((function(){if(c.toggle){var e=c.type;"draft_delete"===e&&O("delete this draft"),"log_out"===e&&O("log out"),"draft_delete_all"===e&&O("delete your drafts"),"account_delete"===e&&O("delete your account")}}),[c.toggle]),c.toggle?n.a.createElement("div",{className:"popover ".concat(f)},n.a.createElement("div",{className:"popover__inner"},n.a.createElement("p",{className:"text text--medium text--bold text--center"},"Are you sure you want to ",E,"?"),n.a.createElement("div",{className:"popover__row"},n.a.createElement("button",{onClick:w,className:"popover__btn popover__btn--confirm"},"Cancel"),n.a.createElement("button",{onClick:function(){var e=c.type;c.index;return"draft_delete"===e?function(){var e=l;e.splice(c.index,1),u({type:"drafts",payload:e});try{D.database().ref("/users/".concat(i.uid)).child("drafts").set(e),w()}catch(t){console.error(t)}}():"draft_delete_all"===e?function(){u({type:"drafts",payload:[]});try{D.database().ref("/users/".concat(i.uid)).child("drafts").set([]),w()}catch(e){console.error(e)}}():"account_delete"===e?j():"log_out"===e?h():void 0},className:"popover__btn"},c.button_text)))):null},R=function(e){var t=s(),a=Object(m.a)(t,1)[0].animations,r=e.draft;return n.a.createElement("div",{className:"draft ".concat(a.draft_delete)},n.a.createElement("div",{onClick:function(){return e.handleEditDraft(e.index)},className:"draft__clickable-wrapper"},n.a.createElement("p",{className:"draft__text"},r.text)),n.a.createElement("button",{className:"draft__delete",onClick:function(){return e.handleDeleteDraft(e.index)}},n.a.createElement("img",{src:"/icons/trash.svg",alt:"Delete this draft"})))};function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B=function(){var e=s(),t=Object(m.a)(e,2),a=t[0],o=a.user,c=a.modify,l=a.drafts,i=a.animations,u=a.popover,d=t[1],p=function(e){var t=[!0,e];d({type:"animations",payload:W({},i,{overlay:"animate--fade-in"})}),d({type:"modify",payload:W({},c,{edit_draft:t})})},f=function(e){d({type:"modify",payload:W({},c,{edit_draft:[!1,e]})}),d({type:"popover",payload:{toggle:!0,type:"draft_delete",index:e,button_text:"Delete"}})},y=function(){d({type:"modify",payload:W({},c,{new_draft:!0})}),d({type:"animations",payload:W({},i,{overlay:"animate--fade-in"})})};Object(r.useEffect)((function(){d({type:"toggleLoader",payload:!0}),D.database().ref("/users/"+o.uid).once("value").then((function(e){try{var t=e.val();if(t)t.drafts&&t.drafts.length>0&&d({type:"drafts",payload:t.drafts}),d({type:"toggleLoader",payload:!1});else{console.log(o);var a={twitterID:o.twitterID,uid:o.uid};D.database().ref("/users/".concat(o.uid,"/")).set(JSON.parse(JSON.stringify(a)))}}catch(r){console.error(r)}})),document.addEventListener("keypress",(function(e){return function(e){"="===e.key&&setTimeout((function(){y()}),100)}(e)}))}),[]);return o.isAuthenticated?l&&l.length?n.a.createElement("div",{className:"drafts__container animate--fade-in ".concat(u.toggle?"blur":"")},n.a.createElement("div",{className:"drafts animate--fade-in"},l.map((function(e,t){return function(e,t){return n.a.createElement(R,{key:e.text.slice(0,10),draft:e,index:t,handleEditDraft:p,handleDeleteDraft:f})}(e,t)})),n.a.createElement("div",{style:{paddingTop:10,paddingBottom:10},className:"placeholder"},n.a.createElement("button",{style:{marginTop:20,marginBottom:20},onClick:y,className:"placeholder__button"},n.a.createElement("span",{className:"btn__inner"},n.a.createElement("span",{className:"icon fas btn-text-one text--slim"},"Add new draft"),n.a.createElement("span",{className:"icon fas btn-text-two"}))))),n.a.createElement("button",{className:"drafts__add-mobile",onClick:y},n.a.createElement("img",{src:"/icons/close.svg",alt:"Create new draft"}))):n.a.createElement("div",{className:"drafts__container animate--fade-in"},n.a.createElement("div",{className:"drafts placeholder"},n.a.createElement("div",{className:"placeholder__art"}),n.a.createElement("button",{onClick:y,className:"placeholder__button"},n.a.createElement("span",{className:"btn__inner"},n.a.createElement("span",{className:"icon fas btn-text-one text--slim"},"Create a draft"),n.a.createElement("span",{className:"icon fas btn-text-two"})))),n.a.createElement("button",{style:u.toggle?{opacity:0}:null,className:"drafts__add-mobile",onClick:y},n.a.createElement("img",{src:"/add.svg",alt:"Create new draft"}))):null},z=a(10),J=a.n(z),K=a(15),F=(a(34),function(e){return n.a.createElement("div",{className:e.goal>0?"progress-ring__container":"hidden"},n.a.createElement(K.a,{value:e.progress,text:e.count,initialAnimation:!0,strokeWidth:5,className:"progress-ring__circle-chart",styles:{path:{stroke:"".concat(e.progress>0&&e.progress<=33.333?"#8ffdfc":e.progress>33.333&&e.progress<=50?"#8fc1fc":e.progress>51&&e.progress<=66.6666?"#c363a5":e.progress>67&&e.progress<=80?"#c43f9a":e.progress>81&&e.progress<=100?"#db1c87":e.progress>=100?"#f04100":null)},text:{fill:"".concat(e.progress>0&&e.progress<=33.333?"#8ffdfc":e.progress>33.333&&e.progress<=50?"#8fc1fc":e.progress>51&&e.progress<=66.6666?"#c363a5":e.progress>67&&e.progress<=80?"#c43f9a":e.progress>81&&e.progress<=100?"#db1c87":e.progress>=100?"#f04100":null)}}}))});function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G=function(){var e=Object(r.useState)(!0),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(r.useState)(!1),l=Object(m.a)(c,2),u=l[0],d=l[1],p=Object(r.useState)(""),f=Object(m.a)(p,2),y=f[0],g=f[1],b=Object(r.useState)(""),v=Object(m.a)(b,2),_=v[0],E=v[1],O=Object(r.useState)("Copy"),h=Object(m.a)(O,2),j=h[0],w=h[1],N=Object(r.useState)(0),P=Object(m.a)(N,2),k=P[0],D=P[1],C=Object(r.useState)(0),S=Object(m.a)(C,2),A=S[0],L=S[1],T=s(),I=Object(m.a)(T,2),R=I[0],U=R.user,W=R.modify,B=R.drafts,z=R.animations,K=I[1],Y=Object(r.useRef)(null),G=function(e){e.preventDefault();var t=B,a={text:y,timestamp:J()().unix()};t.push(a),K({type:"drafts",payload:t});try{x.a.database().ref("/users/".concat(U.uid)).child("drafts").update(t),Y.current.value="",$("new_draft")}catch(e){d(!0),o(!0),console.error(e)}},H=function(e){return L(Math.floor(e/280*100))},M=function(e){e.preventDefault(),Y.current.select(),document.execCommand("copy"),w(n.a.createElement("img",{className:"modify__button--tick",alt:"Text Copied",src:"/icons/check.svg"})),Y.current.focus(),Y.current.setSelectionRange(k,k),setTimeout((function(){w("Copy")}),1500)},V=function(e){e.preventDefault();var t=encodeURI(y),a="https://twitter.com/intent/tweet?text=".concat(t);window.open(a,"_blank"),Y.current.focus(),Y.current.setSelectionRange(k,k)},$=function(e){K({type:"animations",payload:Z({},z,{overlay:"animate--fade-out"})}),setTimeout((function(){K({type:"modify",payload:Z({},W,Object(i.a)({},e,!1))}),o(!0)}),200)},q=function(e){e&&(B[W.edit_draft[1]].text=_,K({type:"drafts",payload:B})),K({type:"animations",payload:Z({},z,{overlay:"animate--fade-out"})}),o(!0),setTimeout((function(){K({type:"modify",payload:Z({},W,{edit_draft:[!1,null]})})}),200)};if(Object(r.useEffect)((function(){D(0),H(0),(W.new_draft||W.edit_draft[0])&&(document.addEventListener("keypress",(function(e){return function(e){e.shiftKey&&("Enter"===e.key&&console.log("hit"),W.new_draft&&G(e))}(e)})),Y.current.focus(),Y.current.setSelectionRange(k,k),W.edit_draft[0]&&(E(B[W.edit_draft[1]].text),g(B[W.edit_draft[1]].text),o(!1),D(B[W.edit_draft[1]].text.length),H(B[W.edit_draft[1]].text.length)))}),[W.edit_draft,_,B,W.new_draft]),W.new_draft)return n.a.createElement("div",{className:"modify__container modify--open ".concat(z.overlay)},n.a.createElement("div",{className:"header--overlay"},n.a.createElement("div",{className:"header__avatar"},n.a.createElement("img",{alt:"Avatar",src:U.avatar})),n.a.createElement("button",{className:"overlay__cancel",onClick:function(){return $("new_draft")}},n.a.createElement("img",{src:"/close.svg",alt:"Close this page"}))),n.a.createElement("form",null,n.a.createElement("textarea",{type:"text",placeholder:"What's your idea?",className:"modify__input",maxLength:1e4,onChange:function(e){var t=e.target.value;g(t),D(t.length),H(t.length),t.length>0?o(!1):o(!0)},ref:Y,style:u?{border:"2px solid red"}:null}),n.a.createElement("p",{className:u?"modify__error":"hidden"},"Something's gone wrong. You may want to try refreshing the page."),n.a.createElement("div",{className:"modify__controls"},n.a.createElement("div",{className:"modify__char-count"},n.a.createElement(F,{goal:280,progress:A,count:k})),n.a.createElement("button",{className:"modify__button",onClick:M,disabled:a||u},j),n.a.createElement("button",{className:"modify__button",onClick:V,disabled:a||u},"Tweet"),n.a.createElement("button",{className:"modify__button modify__button--save",onClick:G,disabled:a||u},"Save"))));if(W.edit_draft[0]){var Q=B[W.edit_draft[1]],X=J.a.unix(Q.timestamp).fromNow();return n.a.createElement("div",{className:"modify__container modify--open ".concat(z.overlay)},n.a.createElement("div",{className:"header--overlay"},n.a.createElement("div",{className:"header__avatar"},n.a.createElement("img",{alt:"Avatar",src:U.avatar})),n.a.createElement("button",{className:"overlay__cancel",onClick:function(){return q(!0)}},n.a.createElement("img",{src:"/close.svg",alt:"Close this page"}))),n.a.createElement("form",null,n.a.createElement("textarea",{type:"text",placeholder:"What's your idea?",className:"modify__input",maxLength:1e4,onChange:function(e){var t=e.target.value;g(t);var a=B;a[W.edit_draft[1]].text=t,a[W.edit_draft[1]].timestamp=J()().unix(),K({type:"drafts",payload:B})},value:B[W.edit_draft[1]].text,ref:Y,style:u?{border:"2px solid red"}:null}),n.a.createElement("p",{className:u?"modify__error":"hidden"},"Something's gone wrong. You may want to try refreshing the page."),n.a.createElement("div",{className:"modify__controls-container"},n.a.createElement("div",{className:"modify__controls"},n.a.createElement(F,{goal:280,progress:A,count:k}),n.a.createElement("button",{className:"modify__button",onClick:M,disabled:a||u},j),n.a.createElement("button",{className:"modify__button",onClick:V,disabled:a||u},"Tweet"),n.a.createElement("button",{className:"modify__button modify__button--save",onClick:function(e){e.preventDefault();try{x.a.database().ref("/users/".concat(U.uid)).child("drafts").update(B),q(!1)}catch(e){d(!0),o(!0),console.error(e)}},disabled:a||u},"Save")),n.a.createElement("div",{className:"modify__timestamp"},n.a.createElement("p",{className:"text text--tiny text--light text--slim"},n.a.createElement("em",null,"last modified ",X))))))}return null};function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var V=function(e){var t=s(),a=Object(m.a)(t,2),r=a[0],o=r.user,c=r.toggleLogout,l=r.animations,i=a[1],u=function(){i({type:"animations",payload:M({},l,{overlay:"animate--fade-out"})}),setTimeout((function(){i({type:"toggleLogout",payload:!1})}),200)},d=c?"logout__container ".concat(l.overlay):"hidden ".concat(l.overlay);return n.a.createElement("div",{className:d},n.a.createElement("div",{className:"header--overlay"},n.a.createElement("div",{className:"header__avatar"},n.a.createElement("img",{alt:"Avatar",src:o.avatar})),n.a.createElement("button",{className:"overlay__cancel",onClick:u},n.a.createElement("img",{src:"/close.svg",alt:"Close this page"}))),n.a.createElement("div",{className:"logout"},n.a.createElement("p",{className:"text text--medium text--slim"},"Are you sure?"),n.a.createElement("div",{className:"placeholder"},n.a.createElement("button",{onClick:function(){k.signOut().then((function(){i({type:"user",payload:M({},o,{isAuthenticated:!1})}),u()}))},className:"placeholder__button"},n.a.createElement("span",{className:"btn__inner"},n.a.createElement("span",{className:"icon fas btn-text-one text text--small text--slim"},"Log Out"),n.a.createElement("span",{className:"icon btn-text--logout"}))))),n.a.createElement(w,null))},$=function(){var e=s();return Object(m.a)(e,1)[0].user.isAuthenticated?n.a.createElement(n.a.Fragment,null,n.a.createElement(j,null),n.a.createElement(B,null),n.a.createElement(G,null),n.a.createElement(_,null),n.a.createElement(V,null)):null};a(35);var q=function(){var e=s(),t=Object(m.a)(e,1)[0],a=t.popover,o=t.modify,c=t.settings,l=Object(r.useState)(""),i=Object(m.a)(l,2),u=i[0],d=i[1];return Object(r.useEffect)((function(){a.toggle||o.new_draft||o.edit_draft[0]||c.toggle?d("no-scroll"):d("")}),[a.toggle||o.new_draft||o.edit_draft[0]||c.toggle]),n.a.createElement("div",{className:"app"},n.a.createElement("main",{className:"app__wrapper ".concat(u)},n.a.createElement("div",{className:"app__inner"},n.a.createElement(p,null),n.a.createElement(A,null),n.a.createElement($,null)),n.a.createElement(I,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement((function(e){var t=e.reducer,a=e.initialState,o=e.children;return n.a.createElement(l.Provider,{value:Object(r.useReducer)(t,a)},o)}),{initialState:{user:{isAuthenticated:!1,uid:null,username:null,avatar:null},drafts:[],twit:{},modify:{new_draft:!1,edit_draft:[!1,null]},animations:{overlay:"animate--fade-in",loader_out:!1,draft_delete:""},popover:{toggle:!1,type:"",index:null,buttonText:""},settings:{toggle:!1},toggleLogout:!1,isLoading:!1},reducer:function(e,t){switch(t.type){case"user":return d({},e,{user:t.payload});case"drafts":return d({},e,{drafts:t.payload});case"twit":return d({},e,{twit:t.payload});case"animations":return d({},e,{animations:t.payload});case"toggleLoader":return d({},e,{isLoading:t.payload});case"settings":return d({},e,{settings:t.payload});case"popover":return d({},e,{popover:t.payload});case"toggleLogout":return d({},e,{toggleLogout:t.payload});case"modify":return d({},e,{modify:t.payload});default:return e}}},n.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.c86973bf.chunk.js.map